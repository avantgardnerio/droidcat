#!/bin/bash

destdir=/home/hcai/testbed/cov.instrumented/malware/

instr()
{
	mkdir -p $destdir/tmp/
	i=1
	for orgapk in /home/hcai/testbed/uniqMalware/*.apk
	do
		/home/hcai/testbed/covInstr.sh $orgapk $destdir/tmp/ 1>malwarecovInstr.log 2>&1
		mv $destdir/tmp/*.apk $destdir/${i}.apk
		#mv $destdir/tmp/*.out $destdir/
		#cp /home/hcai/Malware_Apps_Apks/${orgapk##*/}.result $destdir/${i}.apk.result
		#cp /home/hcai/Malware_Apps_Apks/${orgapk##*/} $destdir/${i}-org.apk
		#rm -f $destdir/tmp/*
		((i++))
	done
	rm -rf $destdir/tmp
}

sign()
{
	for instredapk in $destdir/*.apk
	do
		echo "chapple" | /home/hcai/testbed/signandalign.sh $instredapk
	done
}

instr

#sign

exit 0
